<!DOCTYPE html>
<html lang="tr">
<head>
<style>
    html { zoom: 1 !important; }
    @media (max-width: 1200px) {
        html { zoom: 0.9 !important; }
    }
    @media (max-width: 900px) {
        html { zoom: 0.8 !important; }
    }
</style>
<meta charset="UTF-8">
<title>Dashboard</title>
<link rel="stylesheet" href="css/app.css">
<link rel="stylesheet" href="/vendor/fontawesome/css/all.min.css">
<link rel="stylesheet" href="/vendor/vis-network/vis-network.min.css">
<script src="/vendor/vis-network/vis-network.min.js"></script>
</head>
<body>

<div class="dashboard-shell">
    <aside class="sidebar">
        <div class="brand">
            <div class="brand-title">Servis Topoloji</div>
            <div id="usernameTag" class="brand-user"></div>
        </div>
        <nav class="nav">
            <button class="nav-item" data-target="overview"><i class="fa fa-chart-line"></i><span>Genel BakÄ±ÅŸ</span></button>
            <button class="nav-item" data-target="topologies"><i class="fa fa-diagram-project"></i><span>Topolojiler</span></button>
            <button class="nav-item" data-target="topo-upload"><i class="fa fa-plus"></i><span>Topoloji Ekle</span></button>
            <button class="nav-item" data-target="sheflikler"><i class="fa fa-sitemap"></i><span>Åžeflikler</span></button>
            <button class="nav-item" data-target="servers"><i class="fa fa-server"></i><span>Sunucular</span></button>
            <button class="nav-item" data-target="ports"><i class="fa fa-network-wired"></i><span>Portlar</span></button>
            <button class="nav-item" data-target="canvas"><i class="fa fa-pencil-ruler"></i><span>Ã‡izim AlanÄ±</span></button>
            <button class="nav-item" data-target="admin-list"><i class="fa fa-users"></i><span>Adminler</span></button>
            <button class="nav-item" data-target="access-list"><i class="fa fa-id-card"></i><span>GiriÅŸ Yetkililer</span></button>
            <button class="nav-item" data-target="integration"><i class="fa fa-plug"></i><span>Entegrasyon</span></button>
        </nav>
        <button class="nav-item logout" onclick="logout()"><i class="fa fa-right-from-bracket"></i><span>Ã‡Ä±kÄ±ÅŸ</span></button>
    </aside>

    <main class="content">
                <!-- Topoloji DÃ¼zenleme ModalÄ± -->
                <div id="editTopologyModal" style="display:none;position:fixed;z-index:99999;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.35);align-items:center;justify-content:center;">
                    <div style="background:#fff;padding:2.2rem 2.5rem;border-radius:1.2rem;max-width:95vw;min-width:340px;box-shadow:0 8px 32px #0002;position:relative;">
                        <button onclick="document.getElementById('editTopologyModal').style.display='none'" style="position:absolute;top:1rem;right:1rem;font-size:1.2rem;background:none;border:none;cursor:pointer;"><i class='fa fa-times'></i></button>
                        <h2 style="margin-bottom:1.2rem;">Topoloji Bilgilerini DÃ¼zenle</h2>
                        <form id="editTopologyForm">
                            <div class="form-row">
                                <div class="form-field">
                                    <label>Topoloji AdÄ±</label>
                                    <input type="text" id="editTopologyName" required style="color:#fff;background:#1e293b;border:1px solid #334155;">
                                </div>
                                <div class="form-field">
                                    <label>Sunucu AdÄ±</label>
                                    <input type="text" id="editServerName" required style="color:#fff;background:#1e293b;border:1px solid #334155;">
                                </div>
                                <div class="form-field">
                                    <label>IP Adresi</label>
                                    <input type="text" id="editServerIp" required style="color:#fff;background:#1e293b;border:1px solid #334155;">
                                </div>
                                <div class="form-field">
                                    <label>Dosya AdÄ±</label>
                                    <input type="text" id="editFileName" required style="color:#fff;background:#1e293b;border:1px solid #334155;">
                                </div>
                                <div class="form-field">
                                    <label>Åžeflik</label>
                                    <input type="text" id="editDept" required style="color:#fff;background:#1e293b;border:1px solid #334155;">
                                </div>
                                <div class="form-field">
                                    <label>Platform</label>
                                    <input type="text" id="editPlatform" required style="color:#fff;background:#1e293b;border:1px solid #334155;">
                                </div>
                                <div class="form-field">
                                    <label>Kritiklik</label>
                                    <input type="text" id="editCritical" required style="color:#fff;background:#1e293b;border:1px solid #334155;">
                                </div>
                                <div class="form-field">
                                    <label>Not</label>
                                    <input type="text" id="editNote" style="color:#fff;background:#1e293b;border:1px solid #334155;">
                                </div>
                            </div>
                            <div class="form-actions" style="margin-top:1.2rem;">
                                <button type="submit" class="btn primary">Kaydet</button>
                            </div>
                        </form>
                    </div>
                </div>
        <div class="topbar">
            <div>
                <p class="eyebrow">Servis Topoloji</p>
                <h1>Kontrol Paneli</h1>
            </div>
            <div class="topbar-actions">
                <span id="currentUser" class="current-user"></span>
                <button id="adminTopBtn" class="btn ghost"><i class="fa fa-user-shield"></i> Admin</button>
                <button id="themeToggle" class="btn ghost"><i class="fa fa-adjust"></i> Tema</button>
            </div>
        </div>

        <section id="overview" class="section active">
            <div class="section-header">
                <div>
                    <p class="eyebrow">Genel BakÄ±ÅŸ</p>
                    <h1>Son Durum</h1>
                </div>
            </div>
            <div class="cards-grid" id="overviewCards"></div>
        </section>

        <section id="topologies" class="section">
            <div class="section-header">
                <div>
                    <p class="eyebrow">Topolojiler</p>
                    <h1>Topoloji Listesi</h1>
                </div>
            </div>
            <div class="panel">
                <div class="panel-row wrap">
                    <div class="btn-group">
                        <button class="btn success" id="exportExcelBtn"><i class="fa fa-file-excel"></i> Excel'e Aktar</button>
                        <button class="btn warning" id="exportPdfBtn"><i class="fa fa-file-pdf"></i> PDF'ye Aktar</button>
                        <button class="btn danger" id="deleteSelectedBtn"><i class="fa fa-trash"></i> SeÃ§ili Topolojileri Sil</button>
                    </div>
                    <div class="filters">
                        <label>Åžeflik
                            <select id="filterDept">
                                <option value="">TÃ¼m Åžeflikler</option>
                            </select>
                        </label>
                        <label>Kritiklik
                            <select id="filterCrit">
                                <option value="">TÃ¼mÃ¼</option>
                                <option value="DÃ¼ÅŸÃ¼k">DÃ¼ÅŸÃ¼k</option>
                                <option value="Orta">Orta</option>
                                <option value="YÃ¼ksek">YÃ¼ksek</option>
                            </select>
                        </label>
                        <label>Ara
                            <input id="filterSearch" type="text" placeholder="Sunucu / dosya ara">
                        </label>
                        <label>Sunucu (Ad/IP)
                            <input id="filterServer" type="text" placeholder="Sunucu adÄ± veya IP">
                        </label>
                        <button class="btn ghost" id="filterReset"><i class="fa fa-rotate"></i> SÄ±fÄ±rla</button>
                    </div>
                </div>

                <div class="panel-row wrap" style="align-items:center;justify-content:space-between;margin-top:0.5rem;">
                    <div id="topologyCount" class="muted" style="font-weight:600;"></div>
                    <div style="display:flex;align-items:center;gap:0.5rem;">
                        <label style="display:flex;align-items:center;gap:0.4rem;">Sayfa boyutu
                            <select id="pageSizeSelect">
                                <option value="10">10</option>
                                <option value="50">50</option>
                                <option value="100">100</option>
                                <option value="all">Hepsi</option>
                            </select>
                        </label>
                        <button class="btn ghost" id="prevPageBtn"><i class="fa fa-chevron-left"></i></button>
                        <span id="pageInfo" class="muted"></span>
                        <button class="btn ghost" id="nextPageBtn"><i class="fa fa-chevron-right"></i></button>
                    </div>
                </div>

                <div class="table-wrap">
                    <div id="versionModal" style="display:none;position:fixed;z-index:9999;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.4);align-items:center;justify-content:center;">
                        <div style="background:#fff;padding:2rem 2.5rem;border-radius:1rem;max-width:90vw;max-height:80vh;overflow:auto;box-shadow:0 8px 32px #0002;position:relative;">
                            <button onclick="closeVersionModal()" style="position:absolute;top:1rem;right:1rem;font-size:1.2rem;background:none;border:none;cursor:pointer;"><i class='fa fa-times'></i></button>
                            <h2 style="margin-bottom:1rem;">GeÃ§miÅŸ Versiyonlar</h2>
                            <div id="versionModalContent"></div>
                        </div>
                    </div>
                    <table class="table" id="topologyTable">
                        <thead>
                            <tr>
                                <th>Topoloji AdÄ±</th>
                                <th>Sunucu TanÄ±mÄ±</th>
                                <th>Dosya AdÄ±</th>
                                <th>Åžeflik</th>
                                <th>Versiyon</th>
                                <th>Ekleme Tarihi</th>
                                <th>Ekleyen KiÅŸi</th>
                                <th>Platform</th>
                                <th>Kritiklik</th>
                                <th>Ä°ÅŸlemler</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="topo-upload" class="section">
            <div class="section-header">
                <div>
                    <p class="eyebrow">Topoloji</p>
                    <h1>Topoloji Ekle (SVG / PDF / XLSX)</h1>
                </div>
            </div>
            <div class="panel">
                <form id="uploadForm" class="form">
                    <div class="form-field">
                        <label for="topologyFiles">Dosya SeÃ§ (.svg, .pdf, .xlsx, .png)</label>
                        <input type="file" id="topologyFiles" multiple accept=".svg,.pdf,.xlsx,.xls,.png,.jpg,.jpeg">
                        <small style="color:#64748b;margin-top:0.5rem;display:block;">Dosya adÄ± formatÄ±: SunucuAdÄ±(IP.Adres.i).svg - Ã–rn: IETTMSSQLDB01(10.100.0.36).svg</small>
                    </div>
                    <div id="parsedFilesPreview" style="margin:1rem 0;padding:1rem;background:#f8fafc;border-radius:8px;display:none;">
                        <h4 style="margin:0 0 0.5rem 0;color:#0f172a;font-size:0.9rem;">Parse Edilen Dosyalar - Her Biri Ä°Ã§in AyrÄ± Ayarlar:</h4>
                        <div id="fileConfigContainer"></div>
                        <div style="margin-top:1rem;padding-top:1rem;border-top:1px solid #e2e8f0;">
                            <button type="button" id="copyFirstToAll" class="btn ghost" style="margin-bottom:1rem;display:none;">
                                <i class="fa fa-copy"></i> Ä°lk AyarlarÄ± DiÄŸerlerine Kopyala
                            </button>
                        </div>
                    </div>
                    <div class="form-field" style="display:none;">
                        <label for="serverName">Sunucu AdÄ± (Opsiyonel - dosya adÄ±ndan alÄ±nÄ±r)</label>
                        <input type="text" id="serverName" placeholder="Ã–rn: IETT_MSSQLDB02">
                    </div>
                    <div class="form-field" style="display:none;">
                        <label for="serverIp">IP Adresi (Opsiyonel - dosya adÄ±ndan alÄ±nÄ±r)</label>
                        <input type="text" id="serverIp" placeholder="Ã–rn: 10.100.0.37">
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn primary">Kaydet</button>
                        <span class="message" id="uploadMessage"></span>
                    </div>
                </form>
            </div>
        </section>

        <section id="sheflikler" class="section">
            <div class="section-header" style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <p class="eyebrow">Åžeflikler</p>
                    <h1>Åžeflik DÃ¼zenle</h1>
                </div>
                <button id="addSheflikBtn" class="btn" style="background: linear-gradient(135deg, #10b981, #059669); color: white; font-size: 1rem; padding: 0.6rem 1.2rem; border: none; border-radius: 0.5rem; cursor: pointer; transition: all 0.3s;"><i class="fa fa-plus"></i> Yeni Åžeflik Ekle</button>
            </div>
            <div class="panel">
                <div class="table-wrap">
                    <table class="table" id="sheflikTable">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Åžeflik AdÄ±</th>
                                <th>Durum</th>
                                <th>Ekleme Tarihi</th>
                                <th>Ä°ÅŸlemler</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Åžeflik Ekleme/DÃ¼zenleme ModalÄ± -->
        <div id="sheflikModal" style="display:none;position:fixed;z-index:99999;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.35);align-items:center;justify-content:center;">
            <div style="background:#fff;padding:2.2rem 2.5rem;border-radius:1.2rem;max-width:500px;min-width:340px;box-shadow:0 8px 32px #0002;position:relative;">
                <button onclick="closeSheflikModal()" style="position:absolute;top:1rem;right:1rem;font-size:1.2rem;background:none;border:none;cursor:pointer;"><i class='fa fa-times'></i></button>
                <h2 id="sheflikModalTitle" style="margin-bottom:1.2rem;">Yeni Åžeflik Ekle</h2>
                <form id="sheflikForm">
                    <div class="form-field" style="margin-bottom:1rem;">
                        <label style="display:block;font-size:0.9rem;font-weight:600;color:#0f172a;margin-bottom:0.5rem;">Åžeflik AdÄ±</label>
                        <input type="text" id="sheflikNameInput" placeholder="Åžeflik adÄ±nÄ± giriniz..." required style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;font-size:0.95rem;color:#0f172a;background:#ffffff;">
                    </div>
                    <div class="form-actions" style="margin-top:1.5rem;display:flex;gap:0.8rem;">
                        <button type="submit" id="sheflikSubmitBtn" class="btn primary" style="flex:1;padding:0.7rem;background:linear-gradient(135deg, #3b82f6, #1d4ed8);color:white;border:none;border-radius:0.5rem;cursor:pointer;font-weight:600;transition:all 0.3s;">Kaydet</button>
                        <button type="button" onclick="closeSheflikModal()" class="btn" style="flex:1;padding:0.7rem;background:#e2e8f0;color:#0f172a;border:none;border-radius:0.5rem;cursor:pointer;font-weight:600;transition:all 0.3s;">Ä°ptal</button>
                    </div>
                </form>
            </div>
        </div>

        <section id="servers" class="section">
            <div class="section-header">
                <div>
                    <p class="eyebrow">Sunucular</p>
                    <h1>Sunucu YÃ¶netimi</h1>
                </div>
            </div>
            <div class="panel">
                <div class="panel-row wrap">
                    <div>
                        <h3>Yeni Sunucu Ekle</h3>
                        <p class="muted">Sisteme yeni sunucu eklemek iÃ§in bilgileri giriniz.</p>
                    </div>
                    <div style="margin-left:auto;display:flex;gap:0.6rem;align-items:center;">
                        <span id="serversFilterLabel" class="muted"></span>
                        <button id="exportServersExcelBtn" class="btn ghost"><i class="fa fa-file-excel"></i></button>
                        <button id="exportServersPdfBtn" class="btn ghost"><i class="fa fa-file-pdf"></i></button>
                    </div>
                </div>
                <form class="form" style="display:grid;gap:1rem;grid-template-columns:1fr 1fr;margin-bottom:2rem;">
                    <div class="form-field">
                        <label for="serverNameInput">Sunucu AdÄ±</label>
                        <input type="text" id="serverNameInput" placeholder="Ã–rn: SQLDB-01" style="background:#ffffff;color:#0f172a;">
                    </div>
                    <div class="form-field">
                        <label for="serverIpInput">IP Adresi</label>
                        <input type="text" id="serverIpInput" placeholder="Ã–rn: 192.168.1.100" style="background:#ffffff;color:#0f172a;">
                    </div>
                    <button type="button" id="addServerBtn" class="btn primary">Sunucu Ekle</button>
                </form>
                <div class="table-wrap">
                    <table class="table" id="serversTable">
                        <thead>
                            <tr>
                                <th>Sunucu Bilgileri</th>
                                <th>Kritiklik Seviyesi</th>
                                <th>Ekleme Tarihi</th>
                                <th>Ä°ÅŸlemler</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="ports" class="section">
            <div class="section-header">
                <div>
                    <p class="eyebrow">Portlar</p>
                    <h1>Port TanÄ±mlamasÄ±</h1>
                </div>
            </div>
            <div class="panel">
                <div class="panel-row wrap">
                    <div>
                        <h3>Yeni Port Ekle</h3>
                        <p class="muted">Port adÄ±, numarasÄ±, rengi ve aÃ§Ä±klamasÄ±nÄ± girerek yeni port tanÄ±mlayabilirsiniz.</p>
                    </div>
                </div>
                <form id="addPortForm" class="form" style="display:grid;gap:1rem;grid-template-columns:1fr 1fr;margin-bottom:2rem;">
                    <div class="form-field">
                        <label for="portNameInput">Port AdÄ± *</label>
                        <input type="text" id="portNameInput" placeholder="Ã–rn: HTTP, HTTPS, SSH" style="background:#ffffff;color:#0f172a;">
                    </div>
                    <div class="form-field">
                        <label for="portNumberInput">Port NumarasÄ± *</label>
                        <input type="number" id="portNumberInput" placeholder="Ã–rn: 80, 443, 22" style="background:#ffffff;color:#0f172a;" min="1" max="65535">
                    </div>
                    <div class="form-field">
                        <label for="portColorInput">Renk *</label>
                        <input type="color" id="portColorInput" value="#3db8ff" style="background:#ffffff;color:#0f172a;height:2.5rem;cursor:pointer;">
                    </div>
                    <div class="form-field">
                        <label for="portShapeInput">Åžekil *</label>
                        <select id="portShapeInput" style="background:#ffffff;color:#0f172a;">
                            <option value="circle">Daire</option>
                            <option value="square">Kare</option>
                            <option value="triangle">ÃœÃ§gen</option>
                            <option value="diamond">Elmas</option>
                        </select>
                    </div>
                    <div class="form-field" style="grid-column: 1 / -1;">
                        <label for="portDescInput">AÃ§Ä±klama</label>
                        <input type="text" id="portDescInput" placeholder="Ã–rn: Web sunucusu iÃ§in HTTP trafiÄŸi" style="background:#ffffff;color:#0f172a;">
                    </div>
                    <button type="submit" class="btn primary">Port Ekle</button>
                </form>
                <hr style="border:none;border-top:1px solid var(--border);margin:2rem 0;">
                <div class="panel-row wrap">
                    <div>
                        <h3>PortlarÄ± YÃ¶net</h3>
                        <p class="muted">Ekli portlarÄ± gÃ¶rmek, dÃ¼zenlemek veya silmek iÃ§in aÅŸaÄŸÄ±daki tabloyu kullanÄ±n.</p>
                    </div>
                    <button type="button" id="loadDefaultPortsBtn" class="btn success"><i class="fa fa-refresh"></i> VarsayÄ±lan PortlarÄ± YÃ¼kle</button>
                </div>
                <div style="margin-bottom:1rem;">
                    <input type="text" id="portSearchInput" placeholder="Port adÄ± veya numarasÄ± ile ara..." style="width:100%;max-width:400px;padding:0.5rem;border:1px solid var(--border);border-radius:6px;background:var(--input-bg);color:var(--text);">
                </div>
                <div class="table-wrap">
                    <table class="table" id="portsTable">
                        <thead>
                            <tr>
                                <th>Port AdÄ±</th>
                                <th>Port No</th>
                                <th>Åžekil</th>
                                <th>Renk</th>
                                <th>AÃ§Ä±klama</th>
                                <th>Ä°ÅŸlemler</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="canvas" class="section">
            <!-- Only keep the correct button group at the top, remove duplicate below -->
            <div class="section-header">
                <div>
                    <p class="eyebrow">Ã‡izim AlanÄ±</p>
                    <h1>Topoloji OluÅŸturucu</h1>
                </div>
            </div>
            <div class="panel">
                <div class="panel-row wrap" style="margin-bottom:1rem;">
                    <div class="btn-group">
                        <button type="button" id="saveDrawingBtn" class="btn primary"><i class="fa fa-save"></i> Topolojiyi Kaydet</button>
                        <button type="button" id="newDrawingBtn" class="btn ghost"><i class="fa fa-plus"></i> Yeni Ã‡izim</button>
                    </div>
                    <div class="btn-group">
                        <button type="button" id="exportExcelBtn" class="btn success"><i class="fa fa-file-excel"></i> Excel'e Aktar</button>
                        <button type="button" id="exportPdfBtn" class="btn warning"><i class="fa fa-file-pdf"></i> PDF'ye Aktar</button>
                    </div>
                </div>
                
                <div style="display:grid;grid-template-columns:1fr 280px;gap:1rem;">
                    <!-- Topology Builder -->
                    <div style="border:1px solid var(--border);border-radius:0.5rem;padding:1.5rem;background:var(--card);">
                        <h3 style="margin-bottom:1.5rem;display:flex;align-items:center;gap:0.5rem;">
                            <i class="fa fa-sitemap" style="color:var(--accent);font-size:1.3em;"></i>
                            Topoloji OluÅŸturucu
                        </h3>
                        
                        <!-- Topoloji AdÄ± -->
                        <div style="margin-bottom:1.5rem;">
                            <div class="form-field">
                                <label for="topologyName">Topoloji AdÄ± *</label>
                                <input type="text" id="topologyName" placeholder="Ã–rn: Sunucu-Database BaÄŸlantÄ±sÄ±" style="background:#ffffff;color:#0f172a;width:100%;">
                            </div>
                        </div>

                        <!-- Topoloji Metadata -->
                        <div style="margin-bottom:1.5rem;padding:1rem;background:rgba(168,85,247,0.05);border-radius:0.5rem;border-left:3px solid #a855f7;">
                            <h4 style="margin-bottom:0.8rem;font-size:0.95rem;"><i class="fa fa-circle-info" style="color:#a855f7;margin-right:0.5rem;"></i>Topoloji Bilgileri</h4>
                            <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.8rem;margin-bottom:0.8rem;">
                                <!-- Ä°ÅŸletim Sistemi -->
                                <div class="form-field">
                                    <label for="topologyPlatform">Ä°ÅŸletim Sistemi *</label>
                                    <select id="topologyPlatform" style="background:#ffffff;color:#0f172a;">
                                        <option value="">SeÃ§in...</option>
                                        <option value="Windows">Windows</option>
                                        <option value="Linux">Linux</option>
                                    </select>
                                </div>
                                <!-- Kritiklik Seviyesi -->
                                <div class="form-field">
                                    <label for="topologyCritical">Kritiklik Seviyesi *</label>
                                    <select id="topologyCritical" style="background:#ffffff;color:#0f172a;">
                                        <option value="">SeÃ§in...</option>
                                        <option value="YÃ¼ksek">ðŸ”´ YÃ¼ksek</option>
                                        <option value="Orta">ðŸŸ¡ Orta</option>
                                        <option value="DÃ¼ÅŸÃ¼k">ðŸŸ¢ DÃ¼ÅŸÃ¼k</option>
                                    </select>
                                </div>
                            </div>
                            <!-- Åžeflik -->
                            <div class="form-field" style="margin-bottom:0.8rem;">
                                <label for="topologySheflik">Åžeflik *</label>
                                <select id="topologySheflik" style="background:#ffffff;color:#0f172a;">
                                    <option value="">Åžeflik SeÃ§in...</option>
                                </select>
                            </div>
                            <!-- Not -->
                            <div class="form-field">
                                <label for="topologyNote">Not</label>
                                <textarea id="topologyNote" placeholder="Topoloji hakkÄ±nda notlar..." style="background:#ffffff;color:#0f172a;width:100%;min-height:70px;resize:vertical;padding:0.5rem;border:1px solid #e2e8f0;border-radius:0.4rem;font-family:inherit;"></textarea>
                            </div>
                        </div>
                        
                        <!-- Kaynak (Source) -->
                        <div style="margin-bottom:1.5rem;padding:1rem;background:rgba(61,184,255,0.05);border-radius:0.5rem;border-left:3px solid var(--accent);">
                            <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:0.8rem;">
                                <h4 style="margin:0;font-size:0.95rem;">ðŸ“¤ Kaynak (Source)</h4>
                                <button type="button" id="switchSourceBtn" class="btn ghost" style="padding:0.4rem 0.8rem;font-size:0.8rem;display:none;"><i class="fa fa-arrows-rotate"></i> FarklÄ± Kaynak</button>
                            </div>
                            <div id="sourceDisplay" style="margin-bottom:0.8rem;padding:0.75rem;background:#ffffff;border-radius:0.4rem;border:1px solid var(--border);font-weight:600;color:#0f172a;display:none;">
                                <div style="font-size:0.85rem;color:var(--muted);margin-bottom:0.3rem;">ðŸ“Œ SeÃ§ili Kaynak:</div>
                                <span id="sourceDisplayText">-</span>
                            </div>
                            <div id="sourceForm" style="display:grid;grid-template-columns:1fr 1fr;gap:0.8rem;">
                                <div class="form-field">
                                    <label for="sourceType">Kaynak TÃ¼rÃ¼ *</label>
                                    <select id="sourceType" style="background:#ffffff;color:#0f172a;">
                                        <option value="server">Sunucu IP</option>
                                        <option value="internal-vip">Internal VIP</option>
                                        <option value="wan-ip">WAN IP Adresi</option>
                                    </select>
                                </div>
                                <div class="form-field" id="sourceServerField" style="position:relative;">
                                    <label for="sourceServerSearch">Sunucu Ara *</label>
                                    <div style="position:relative;">
                                        <input type="text" id="sourceServerSearch" placeholder="ðŸ” Sunucu adÄ± veya IP ara..." autocomplete="off" style="background:#ffffff;color:#0f172a;width:100%;padding-right:2.5rem;">
                                        <i class="fa fa-chevron-down" id="sourceServerDropdownIcon" style="position:absolute;right:0.8rem;top:50%;transform:translateY(-50%);color:var(--muted);cursor:pointer;pointer-events:auto;"></i>
                                    </div>
                                    <input type="hidden" id="sourceServerId">
                                    <div id="sourceServerList" style="display:none;background:#ffffff;border:1px solid var(--border);border-radius:0.4rem;max-height:200px;overflow-y:auto;margin-top:0.5rem;box-shadow:0 2px 8px rgba(0,0,0,0.1);"></div>
                                </div>
                                <div class="form-field" id="sourceExternalField" style="display:none;">
                                    <label for="sourceIp">IP Adresi *</label>
                                    <input type="text" id="sourceIp" placeholder="192.168.1.1" style="background:#ffffff;color:#0f172a;">
                                </div>
                                <div class="form-field" id="sourceNameField" style="display:none;">
                                    <label for="sourceName">TanÄ±m</label>
                                    <input type="text" id="sourceName" placeholder="Ã–rn: DÄ±ÅŸ Firewall" style="background:#ffffff;color:#0f172a;">
                                </div>
                            </div>
                            <div style="display:flex;gap:0.5rem;margin-top:0.8rem;">
                                <button type="button" id="confirmSourceBtn" class="btn primary" style="flex:1;padding:0.6rem;font-size:0.9rem;display:none;"><i class="fa fa-check"></i> KaynaÄŸÄ± SeÃ§</button>
                                <button type="button" id="cancelSourceBtn" class="btn ghost" style="flex:1;padding:0.6rem;font-size:0.9rem;display:none;">Ä°ptal</button>
                            </div>
                        </div>
                        
                        <!-- Hedef (Destination) -->
                        <div style="margin-bottom:1.5rem;padding:1rem;background:rgba(76,175,80,0.05);border-radius:0.5rem;border-left:3px solid #4CAF50;">
                            <h4 style="margin-bottom:0.8rem;font-size:0.95rem;">ðŸ“¥ Hedef (Destination)</h4>
                            <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.8rem;">
                                <div class="form-field">
                                    <label for="destType">Hedef TÃ¼rÃ¼ *</label>
                                    <select id="destType" style="background:#ffffff;color:#0f172a;">
                                        <option value="server">Sunucu IP</option>
                                        <option value="internal-vip">Internal VIP</option>
                                        <option value="wan-ip">WAN IP Adresi</option>
                                    </select>
                                </div>
                                <div class="form-field" id="destServerField" style="position:relative;">
                                    <label for="destServerSearch">Sunucu Ara *</label>
                                    <div style="position:relative;">
                                        <input type="text" id="destServerSearch" placeholder="ðŸ” Sunucu adÄ± veya IP ara..." autocomplete="off" style="background:#ffffff;color:#0f172a;width:100%;padding-right:2.5rem;">
                                        <i class="fa fa-chevron-down" id="destServerDropdownIcon" style="position:absolute;right:0.8rem;top:50%;transform:translateY(-50%);color:var(--muted);cursor:pointer;pointer-events:auto;"></i>
                                    </div>
                                    <input type="hidden" id="destServerId">
                                    <div id="destServerList" style="display:none;background:#ffffff;border:1px solid var(--border);border-radius:0.4rem;max-height:200px;overflow-y:auto;margin-top:0.5rem;box-shadow:0 2px 8px rgba(0,0,0,0.1);"></div>
                                </div>
                                <div class="form-field" id="destExternalField" style="display:none;">
                                    <label for="destIp">IP Adresi *</label>
                                    <input type="text" id="destIp" placeholder="192.168.1.2" style="background:#ffffff;color:#0f172a;">
                                </div>
                                <div class="form-field" id="destNameField" style="display:none;">
                                    <label for="destName">TanÄ±m</label>
                                    <input type="text" id="destName" placeholder="Ã–rn: VPN Gateway" style="background:#ffffff;color:#0f172a;">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Firewall ve Port SeÃ§imi -->
                        <div style="margin-bottom:1.5rem;">
                            <h4 style="margin-bottom:0.8rem;font-size:0.95rem;">ðŸ”Œ BaÄŸlantÄ± DetaylarÄ±</h4>
                            
                            <!-- Firewall Toggle -->
                            <div style="margin-bottom:1rem;padding:0.8rem;background:rgba(255,159,67,0.1);border-radius:0.4rem;border:1px solid #ff9f43;">
                                <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;">
                                    <input type="checkbox" id="includeFirewall" checked style="width:18px;height:18px;cursor:pointer;">
                                    <span style="font-weight:600;"><i class="fa fa-shield" style="color:#ff9f43;"></i> Firewall AracÄ±lÄ±ÄŸÄ± ile BaÄŸlan</span>
                                </label>
                            </div>
                            
                            <!-- Port SeÃ§imi (Kompakt) -->
                            <div class="form-field" style="position:relative;">
                                <label style="font-size:0.85rem;margin-bottom:0.3rem;">Portlar *</label>
                                <div style="position:relative;max-width:400px;">
                                    <input type="text" id="canvasPortSearchInput" placeholder="ðŸ” Ara..." autocomplete="off" style="background:#ffffff;color:#0f172a;width:100%;padding:0.5rem 2rem 0.5rem 0.6rem;font-size:0.85rem;">
                                    <i class="fa fa-chevron-down" id="portDropdownIcon" style="position:absolute;right:0.6rem;top:50%;transform:translateY(-50%);color:var(--muted);cursor:pointer;pointer-events:auto;font-size:0.75rem;"></i>
                                </div>
                                <div id="portDropdown" style="display:none;background:#ffffff;border:1px solid var(--border);border-radius:0.4rem;max-height:250px;overflow-y:auto;margin-top:0.5rem;box-shadow:0 2px 8px rgba(0,0,0,0.1);">
                                    <div id="portSelectContainer" style="padding:0.5rem;">
                                        <!-- Port checkboxlar buraya eklenecek -->
                                    </div>
                                </div>
                                <div id="selectedPortsTags" style="display:flex;flex-wrap:wrap;gap:0.4rem;margin-top:0.5rem;min-height:32px;">
                                    <!-- SeÃ§ilen portlar tag olarak gÃ¶sterilecek -->
                                </div>
                            </div>
                            
                            <div class="form-field" style="margin-top:1rem;">
                                <label for="connectionNote" style="font-size:0.85rem;margin-bottom:0.3rem;">Not (Ä°steÄŸe BaÄŸlÄ±)</label>
                                <input type="text" id="connectionNote" placeholder="Not..." style="background:#ffffff;color:#0f172a;padding:0.5rem;font-size:0.85rem;max-width:400px;">
                            </div>
                        </div>
                        
                        <button type="button" id="addConnectionBtn" class="btn primary" style="max-width:200px;margin-bottom:0.5rem;padding:0.5rem 1rem;font-size:0.9rem;">
                            <i class="fa fa-plus"></i> BaÄŸlantÄ± Ekle
                        </button>
                        <div id="connectionMessage" style="font-size:0.8rem;color:#3ed598;margin-bottom:1rem;min-height:20px;"></div>
                        
                        <!-- BaÄŸlantÄ±lar Listesi -->
                        <div style="border-top:1px solid var(--border);padding-top:1rem;">
                            <!-- Sekme BaÅŸlÄ±klarÄ± -->
                            <div style="display:flex;gap:0.5rem;margin-bottom:1rem;border-bottom:1px solid var(--border);">
                                <button id="listViewTab" class="topology-view-tab active" onclick="switchTopologyView('list')" style="padding:0.5rem 1rem;border:none;background:none;cursor:pointer;border-bottom:2px solid var(--accent);font-weight:600;color:var(--accent);font-size:0.9rem;">
                                    <i class="fa fa-list"></i> Liste GÃ¶rÃ¼nÃ¼mÃ¼
                                </button>
                                <button id="diagramViewTab" class="topology-view-tab" onclick="switchTopologyView('diagram')" style="padding:0.5rem 1rem;border:none;background:none;cursor:pointer;border-bottom:2px solid transparent;font-weight:600;color:var(--muted);font-size:0.9rem;">
                                    <i class="fa fa-project-diagram"></i> GÃ¶rsel Diyagram
                                </button>
                            </div>
                            
                            <!-- Liste GÃ¶rÃ¼nÃ¼mÃ¼ -->
                            <div id="listView" style="display:block;">
                                <h4 style="margin-bottom:0.8rem;font-size:0.95rem;">OluÅŸturulan BaÄŸlantÄ±lar</h4>
                                <div id="topologyConnectionsList" style="display:flex;flex-direction:column;gap:0.8rem;max-height:400px;overflow-y:auto;">
                                    <p style="color:var(--muted);font-size:0.9rem;text-align:center;padding:1rem;">HenÃ¼z baÄŸlantÄ± yok</p>
                                </div>
                                
                                <!-- Metin Ekleme Butonu (Liste AltÄ±nda) -->
                                <div style="margin-top:1rem;display:flex;gap:0.5rem;flex-wrap:wrap;">
                                    <button type="button" id="addTextToListBtn" class="btn primary" style="padding:0.5rem 1rem;font-size:0.9rem;">
                                        <i class="fa fa-plus"></i> Metin Ekle
                                    </button>
                                </div>
                            </div>
                            
                            <!-- GÃ¶rsel Diyagram -->
                            <div id="diagramView" style="display:none;">
                                <!-- Metin Ekleme Kontrol Paneli -->
                                <div style="margin-bottom:0.8rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:0.5rem;">
                                    <button type="button" id="addTextToDiagramBtn" class="btn primary" style="padding:0.5rem 1rem;font-size:0.9rem;">
                                        <i class="fa fa-plus"></i> Metin Ekle
                                    </button>
                                </div>
                                
                                <div id="topologyNetwork" style="width:100%;height:500px;border:1px solid var(--border);border-radius:0.5rem;background:#ffffff;position:relative;"></div>
                                
                                <div style="margin-top:0.5rem;padding:0.5rem;background:rgba(61,184,255,0.05);border-radius:0.3rem;font-size:0.75rem;color:var(--muted);">
                                    <strong>ðŸ’¡ Ä°pucu:</strong> DÃ¼ÄŸÃ¼mleri sÃ¼rÃ¼kleyebilir, yakÄ±nlaÅŸtÄ±rabilir ve dÃ¶ndÃ¼rebilirsiniz. Metin kutularÄ±nÄ± Ã§iftli tÄ±kla ile dÃ¼zenleyebilirsiniz.
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- SaÄŸ Panel - KÃ¼tÃ¼phaneler (Dropdown) -->
                    <div style="display:flex;flex-direction:column;gap:0.5rem;min-width:280px;">
                        <!-- Sunucu KÃ¼tÃ¼phanesi -->
                        <div style="border:1px solid var(--border);border-radius:0.5rem;background:var(--card);overflow:hidden;">
                            <div id="serverPanelToggle" style="padding:0.8rem;display:flex;align-items:center;justify-content:space-between;cursor:pointer;background:rgba(102,126,234,0.08);border-bottom:1px solid var(--border);user-select:none;" onclick="document.getElementById('serverLibraryPanel').style.display = document.getElementById('serverLibraryPanel').style.display === 'none' ? 'flex' : 'none'; this.querySelector('i').style.transform = document.getElementById('serverLibraryPanel').style.display === 'flex' ? 'rotate(180deg)' : 'rotate(0deg)';">
                                <div style="display:flex;align-items:center;gap:0.5rem;font-weight:600;font-size:0.95rem;">
                                    <i class="fa fa-server" style="color:#667eea;font-size:1.2em;"></i>
                                    Sunucular
                                </div>
                                <i class="fa fa-chevron-down" style="transition:transform 0.3s;color:var(--muted);"></i>
                            </div>
                            <div id="serverLibraryPanel" style="padding:0.8rem;display:flex;flex-direction:column;gap:0.5rem;max-height:250px;overflow-y:auto;">
                                <input type="text" id="serverSearchInput" placeholder="Sunucu ara..." style="padding:0.5rem;border:1px solid var(--border);border-radius:0.3rem;background:var(--bg);color:var(--text);font-size:0.85rem;">
                                <p style="font-size:0.7rem;color:var(--muted);margin:0;">SÃ¼rÃ¼kle-bÄ±rak ile diyagrama ekle</p>
                                <div id="serverLibraryList" style="display:flex;flex-direction:column;gap:0.3rem;"></div>
                            </div>
                        </div>
                        
                        <!-- Port KÃ¼tÃ¼phanesi -->
                        <div style="border:1px solid var(--border);border-radius:0.5rem;background:var(--card);overflow:hidden;">
                            <div id="portPanelToggle" style="padding:0.8rem;display:flex;align-items:center;justify-content:space-between;cursor:pointer;background:rgba(var(--accent-rgb,255,152,0),0.08);border-bottom:1px solid var(--border);user-select:none;" onclick="document.getElementById('portLibraryPanel').style.display = document.getElementById('portLibraryPanel').style.display === 'none' ? 'flex' : 'none'; this.querySelector('i').style.transform = document.getElementById('portLibraryPanel').style.display === 'flex' ? 'rotate(180deg)' : 'rotate(0deg)';">
                                <div style="display:flex;align-items:center;gap:0.5rem;font-weight:600;font-size:0.95rem;">
                                    <i class="fa fa-plug" style="color:var(--accent);font-size:1.2em;"></i>
                                    Portlar
                                </div>
                                <i class="fa fa-chevron-down" style="transition:transform 0.3s;color:var(--muted);"></i>
                            </div>
                            <div id="portLibraryPanel" style="padding:0.8rem;display:none;flex-direction:column;gap:0.5rem;max-height:250px;overflow-y:auto;">
                                <input type="text" id="portSearchInput" placeholder="Port ara..." style="padding:0.5rem;border:1px solid var(--border);border-radius:0.3rem;background:var(--bg);color:var(--text);font-size:0.85rem;">
                                <p style="font-size:0.7rem;color:var(--muted);margin:0;">SÃ¼rÃ¼kle-bÄ±rak ile diyagrama ekle</p>
                                <div id="portReferenceList" style="display:flex;flex-direction:column;gap:0.3rem;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Kaydetme Formu (gizli) -->
                <div id="saveDrawingForm" style="display:none;margin-top:1rem;padding:1.5rem;background:var(--card);border-radius:0.5rem;border:1px solid var(--border);">
                    <h3 style="margin-bottom:1rem;">Topoloji Bilgileri</h3>
                    <form id="topologySaveForm" class="form" style="display:grid;gap:1rem;grid-template-columns:1fr 1fr;">
                        <div class="form-field">
                            <label for="drawingTopologyName">Topoloji AdÄ± *</label>
                            <input type="text" id="drawingTopologyName" required placeholder="Ã–rn: Web KatmanÄ± Topolojisi">
                        </div>
                        <div class="form-field">
                            <label for="drawingServerName">Sunucu AdÄ± *</label>
                            <input type="text" id="drawingServerName" required placeholder="Ã–rn: WebServer-01">
                        </div>
                        <div class="form-field">
                            <label for="drawingServerIp">IP Adresi *</label>
                            <input type="text" id="drawingServerIp" required placeholder="Ã–rn: 192.168.1.100">
                        </div>
                        <div class="form-field">
                            <label for="drawingDept">Åžeflik *</label>
                            <select id="drawingDept" required></select>
                        </div>
                        <div class="form-field">
                            <label for="drawingPlatform">Ä°ÅŸletim Sistemi *</label>
                            <select id="drawingPlatform" required></select>
                        </div>
                        <div class="form-field">
                            <label for="drawingCritical">Kritiklik Seviyesi *</label>
                            <select id="drawingCritical" required></select>
                        </div>
                        <div class="form-field" style="grid-column:1/-1;">
                            <label for="drawingNote">Not (AÃ§Ä±klama)</label>
                            <textarea id="drawingNote" rows="2" placeholder="Varsa not yazÄ±nÄ±z..."></textarea>
                        </div>
                        <div class="form-actions" style="grid-column:1/-1;display:flex;gap:0.5rem;">
                            <button type="submit" class="btn primary">Kaydet</button>
                            <button type="button" id="cancelSaveBtn" class="btn ghost">Ä°ptal</button>
                            <span class="message" id="saveDrawingMessage"></span>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <section id="admin" class="section">
            <div class="section-header">
                <div>
                    <p class="eyebrow">Admin</p>
                    <h1>KullanÄ±cÄ± ve Åžifre</h1>
                </div>
            </div>
            <div class="panel">
                <div class="panel-row">
                    <div>
                        <h3>Åžifre DeÄŸiÅŸtirme</h3>
                        <p class="muted">Ä°steÄŸe baÄŸlÄ± olarak ÅŸifrenizi burada gÃ¼ncelleyebilirsiniz.</p>
                    </div>
                    <button class="btn ghost" id="toggleChange">Åžifre DeÄŸiÅŸtir</button>
                </div>
                <form id="changePasswordForm" class="form" style="display:none">
                    <div class="form-field">
                        <label for="oldPassword">Eski Åžifre</label>
                        <input type="password" id="oldPassword" required>
                    </div>
                    <div class="form-field">
                        <label for="newPassword">Yeni Åžifre</label>
                        <input type="password" id="newPassword" required>
                    </div>
                    <div class="form-field">
                        <label for="confirmPassword">Yeni Åžifre (Tekrar)</label>
                        <input type="password" id="confirmPassword" required>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn primary">Kaydet</button>
                        <div id="changePasswordMessage" class="message"></div>
                    </div>
                </form>
            </div>
        </section>

        <section id="admin-list" class="section">
            <div class="section-header">
                <div>
                    <p class="eyebrow">YÃ¶netim</p>
                    <h1>Admin KullanÄ±cÄ±lar</h1>
                </div>
                <button id="addAdminBtn" class="btn primary"><i class="fa fa-user-plus"></i> Yeni Admin Ekle</button>
            </div>
            <div class="panel">
                <div class="table-wrap">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>KullanÄ±cÄ± AdÄ±</th>
                                <th>Tip</th>
                                <th>OluÅŸturma Tarihi</th>
                                <th>Ä°ÅŸlemler</th>
                            </tr>
                        </thead>
                        <tbody id="adminUsersTable">
                            <tr><td colspan="4" style="text-align:center;color:#94a3b8;">YÃ¼kleniyor...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="access-list" class="section">
            <div class="section-header">
                <div>
                    <p class="eyebrow">GiriÅŸ Yetkililer</p>
                    <h1 id="accessListTitle">Yetkili KullanÄ±cÄ±lar</h1>
                </div>
                <div style="display:flex;gap:0.75rem;">
                    <button id="showUsersViewBtn" class="btn primary" style="display:none;"><i class="fa fa-users"></i> KullanÄ±cÄ± Listesi</button>
                    <button id="showMappingsViewBtn" class="btn" style="background:#6366f1;color:#fff;border:none;"><i class="fa fa-link"></i> AD Grup EÅŸleÅŸtirmeleri</button>
                    <button id="addUserBtn" class="btn primary"><i class="fa fa-user-plus"></i> Yeni KullanÄ±cÄ± Ekle</button>
                </div>
            </div>

            <!-- KullanÄ±cÄ± Listesi GÃ¶rÃ¼nÃ¼mÃ¼ -->
            <div id="usersListView" class="panel">
                <div class="table-wrap">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>KullanÄ±cÄ± AdÄ±</th>
                                <th>Rol</th>
                                <th>Åžeflik</th>
                                <th>Ä°zin Tipi</th>
                                <th>Tip</th>
                                <th>OluÅŸturma Tarihi</th>
                                <th>Ä°ÅŸlemler</th>
                            </tr>
                        </thead>
                        <tbody id="usersTable">
                            <tr><td colspan="7" style="text-align:center;color:#94a3b8;">YÃ¼kleniyor...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- AD Grup EÅŸleÅŸtirmeleri GÃ¶rÃ¼nÃ¼mÃ¼ -->
            <div id="mappingsListView" class="panel" style="display:none;">
                <div style="background:#f8fafc;padding:1.5rem;border-radius:0.75rem;border:1px solid #e2e8f0;">
                    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem;">
                        <div>
                            <h3 style="color:#1e293b;font-size:1.1rem;margin:0 0 0.25rem 0;"><i class="fa fa-link"></i> AD Grup â†” Åžeflik EÅŸleÅŸtirmeleri</h3>
                            <p style="color:#64748b;font-size:0.9rem;margin:0;">Active Directory gruplarÄ±nÄ± ÅŸefliklerle eÅŸleÅŸtirin</p>
                        </div>
                        <button id="addMappingBtn" class="btn primary"><i class="fa fa-plus"></i> Yeni EÅŸleÅŸtirme Ekle</button>
                    </div>

                    <div style="overflow-x:auto;">
                        <table class="table" id="ldapMappingsTable" style="min-width:100%;">
                            <thead style="background:#e2e8f0;">
                                <tr>
                                    <th style="padding:0.75rem;color:#1e293b;font-weight:600;">LDAP Grup AdÄ± (CN)</th>
                                    <th style="padding:0.75rem;color:#1e293b;font-weight:600;">Åžeflik ID</th>
                                    <th style="padding:0.75rem;color:#1e293b;font-weight:600;">Åžeflik AdÄ±</th>
                                    <th style="padding:0.75rem;color:#1e293b;font-weight:600;">Atanan Rol</th>
                                    <th style="padding:0.75rem;color:#1e293b;font-weight:600;text-align:center;">Ä°ÅŸlemler</th>
                                </tr>
                            </thead>
                            <tbody id="ldapMappingsBody">
                                <tr>
                                    <td colspan="5" style="text-align:center;padding:2rem;color:#94a3b8;">
                                        <i class="fa fa-inbox" style="font-size:2rem;margin-bottom:0.5rem;display:block;"></i>
                                        HenÃ¼z eÅŸleÅŸtirme eklenmemiÅŸ. "Yeni EÅŸleÅŸtirme Ekle" butonuna tÄ±klayÄ±n.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- ENTEGRASYON SEKSÄ°YONU -->
        <section id="integration" class="section">
            <div class="section-header">
                <div>
                    <p class="eyebrow">Entegrasyon</p>
                    <h1>Sistem EntegrasyonlarÄ±</h1>
                </div>
            </div>

            <!-- LDAP Entegrasyon Paneli -->
            <div class="panel">
                <div class="panel-header">
                    <h2><i class="fa fa-network-wired"></i> LDAP / Active Directory Entegrasyonu</h2>
                    <p class="muted">LDAP sunucusu baÄŸlantÄ± ayarlarÄ±nÄ± yapÄ±landÄ±rÄ±n</p>
                </div>

                <!-- LDAP YapÄ±landÄ±rmalarÄ± Listesi -->
                <div style="background:#f8fafc;padding:1.5rem;border-radius:0.75rem;margin-bottom:1.5rem;border:1px solid #e2e8f0;">
                    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem;">
                        <h3 style="color:#1e293b;font-size:1.1rem;margin:0;"><i class="fa fa-server"></i> YapÄ±landÄ±rÄ±lmÄ±ÅŸ LDAP SunucularÄ±</h3>
                        <button id="newLdapConfigBtn" class="btn primary"><i class="fa fa-plus"></i> Yeni YapÄ±landÄ±rma</button>
                    </div>

                    <div id="ldapConfigsList" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1rem;margin-bottom:1rem;">
                        <!-- Dinamik olarak doldurulacak -->
                    </div>

                    <div id="ldapConfigsEmpty" style="text-align:center;padding:2rem;color:#64748b;">
                        <i class="fa fa-inbox" style="font-size:2.5rem;margin-bottom:0.5rem;display:block;opacity:0.5;"></i>
                        <p>HenÃ¼z LDAP yapÄ±landÄ±rmasÄ± yok. "Yeni YapÄ±landÄ±rma" butonuna tÄ±klayÄ±n.</p>
                    </div>
                </div>

                <!-- LDAP YapÄ±landÄ±rma Formu -->
                <div id="ldapConfigFormSection" style="background:#f8fafc;padding:1.5rem;border-radius:0.75rem;margin-bottom:1.5rem;border:1px solid #e2e8f0;display:none;">
                    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem;">
                        <h3 id="ldapFormTitle" style="color:#1e293b;font-size:1.1rem;margin:0;"><i class="fa fa-cog"></i> LDAP Sunucu AyarlarÄ±</h3>
                        <button type="button" id="closeLdapFormBtn" class="btn ghost" style="color:#ef4444;"><i class="fa fa-times"></i> Kapat</button>
                    </div>

                    <form id="ldapConfigForm">
                        <div class="form-field" style="margin-bottom:1rem;">
                            <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">LDAP Ä°smi *</label>
                            <input type="text" id="ldapName" placeholder="Ã–rn: LDAP Ä°ETT, LDAP Test" required style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;">
                            <small style="color:#64748b;font-size:0.85rem;">Bu LDAP sunucusunun tanÄ±mÄ± (deÄŸiÅŸtirilemez)</small>
                        </div>

                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                            <div class="form-field">
                                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">Sunucu Adresi (Host)</label>
                                <input type="text" id="ldapHost" placeholder="ldap.example.com" style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;">
                            </div>
                            <div class="form-field">
                                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">Port</label>
                                <input type="number" id="ldapPort" value="636" placeholder="636" style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;">
                            </div>
                        </div>

                        <div class="form-field" style="margin-bottom:1rem;">
                            <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">Base DN</label>
                            <input type="text" id="ldapBaseDn" placeholder="DC=example,DC=com" style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;">
                        </div>

                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                            <div class="form-field">
                                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">Bind DN (Admin KullanÄ±cÄ±)</label>
                                <input type="text" id="ldapBindDn" placeholder="CN=admin,DC=example,DC=com" style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;">
                            </div>
                            <div class="form-field">
                                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">Bind Åžifresi</label>
                                <input type="password" id="ldapBindPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;">
                            </div>
                        </div>

                        <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem;">
                            <div class="form-field">
                                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">KullanÄ±cÄ± Arama Filtresi</label>
                                <input type="text" id="ldapUserFilter" value="(sAMAccountName={0})" style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;">
                                <small style="color:#64748b;font-size:0.85rem;">{0} yerini kullanÄ±cÄ± adÄ±yla deÄŸiÅŸtirir</small>
                            </div>
                            <div class="form-field">
                                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">Grup Ãœyelik Ã–zniteliÄŸi</label>
                                <input type="text" id="ldapGroupAttr" value="memberOf" style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;">
                            </div>
                        </div>

                        <div style="background:#fff;padding:1rem;border-radius:0.5rem;margin-bottom:1rem;border:1px solid #e2e8f0;">
                            <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;">
                                <input type="checkbox" id="ldapEnableLdap" style="width:1.2rem;height:1.2rem;cursor:pointer;">
                                <span style="font-weight:600;color:#334155;">LDAP Kimlik DoÄŸrulamayÄ± EtkinleÅŸtir</span>
                            </label>
                            <p style="font-size:0.85rem;color:#64748b;margin:0.5rem 0 0 1.7rem;">Aktif edildiÄŸinde kullanÄ±cÄ±lar LDAP ile giriÅŸ yapabilir</p>
                        </div>

                        <div style="background:#fff;padding:1rem;border-radius:0.5rem;border:1px solid #e2e8f0;">
                            <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;">
                                <input type="checkbox" id="ldapEnableJit" style="width:1.2rem;height:1.2rem;cursor:pointer;">
                                <span style="font-weight:600;color:#334155;">JIT (Just-In-Time) Provisioning</span>
                            </label>
                            <p style="font-size:0.85rem;color:#64748b;margin:0.5rem 0 0 1.7rem;">Aktif edildiÄŸinde LDAP kullanÄ±cÄ±larÄ± ilk giriÅŸte otomatik olarak sisteme eklenir</p>
                        </div>

                        <div style="margin-top:1.5rem;display:flex;gap:1rem;flex-wrap:wrap;">
                            <button type="submit" class="btn primary" style="flex:1;min-width:200px;"><i class="fa fa-save"></i> YapÄ±landÄ±rmayÄ± Kaydet</button>
                            <button type="button" id="testLdapBtn" class="btn" style="background:#10b981;color:#fff;border:none;flex:0.8;min-width:150px;"><i class="fa fa-check-circle"></i> BaÄŸlantÄ±yÄ± Test Et</button>
                        </div>
                    </form>

                    <div id="ldapConfigMessage" style="margin-top:1rem;padding:0.75rem;border-radius:0.5rem;display:none;"></div>
                </div>
            </div>
        </section>
    </main>
</div>

<!-- LDAP EÅŸleÅŸtirme Ekleme/DÃ¼zenleme ModalÄ± -->
<div id="ldapMappingModal" style="display:none;position:fixed;z-index:99999;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.4);align-items:center;justify-content:center;">
    <div style="background:#fff;padding:2rem 2.5rem;border-radius:1rem;max-width:600px;width:90%;box-shadow:0 8px 32px rgba(0,0,0,0.15);position:relative;">
        <button onclick="closeLdapMappingModal()" style="position:absolute;top:1rem;right:1rem;font-size:1.2rem;background:none;border:none;cursor:pointer;color:#64748b;"><i class="fa fa-times"></i></button>
        <h2 style="margin-bottom:1.5rem;color:#1e293b;" id="ldapMappingModalTitle">Yeni Grup EÅŸleÅŸtirmesi</h2>
        
        <form id="ldapMappingForm">
            <div class="form-field" style="margin-bottom:1rem;position:relative;">
                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">LDAP Grup AdÄ± (CN)</label>
                <input type="text" id="mappingLdapGroup" placeholder="CN=Yazilim_Sefligi,OU=Groups,DC=example,DC=com" required style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;">
                <div id="ldapGroupAutocomplete" style="display:none;position:absolute;top:100%;left:0;right:0;background:#fff;border:1px solid #cbd5e1;border-top:none;border-radius:0 0 0.5rem 0.5rem;max-height:200px;overflow-y:auto;z-index:1000;margin-top:-0.25rem;"></div>
                <small style="color:#64748b;font-size:0.85rem;">Ã–rnek: CN=Yazilim_Sefligi,OU=Groups,DC=example,DC=com</small>
            </div>

            <div class="form-field" style="margin-bottom:1rem;">
                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">Åžeflik SeÃ§imi</label>
                <select id="mappingSeflikSelect" required style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;">
                    <option value="">Åžeflik seÃ§iniz...</option>
                </select>
                <small style="color:#64748b;font-size:0.85rem;">Listeden bir ÅŸeflik seÃ§meniz yeterlidir</small>
            </div>

            <div class="form-field" style="margin-bottom:1.5rem;">
                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">Atanan Rol</label>
                <select id="mappingRole" required style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;">
                    <option value="">Rol seÃ§iniz...</option>
                    <option value="Admin">Admin (TÃ¼m Yetkilere Sahip)</option>
                    <option value="SheflikYetkilisi">Åžeflik Yetkilisi (Sadece Kendi ÅžefliÄŸi)</option>
                </select>
            </div>

            <div style="display:flex;gap:1rem;">
                <button type="submit" class="btn primary" style="flex:1;"><i class="fa fa-save"></i> Kaydet</button>
                <button type="button" onclick="closeLdapMappingModal()" class="btn ghost" style="flex:0.5;">Ä°ptal</button>
            </div>
        </form>

        <div id="ldapMappingMessage" style="margin-top:1rem;padding:0.75rem;border-radius:0.5rem;display:none;"></div>
    </div>
</div>

<!-- Admin KullanÄ±cÄ± Ekleme/DÃ¼zenleme ModalÄ± -->
<div id="adminUserModal" style="display:none;position:fixed;z-index:99999;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.4);align-items:center;justify-content:center;">
    <div style="background:#fff;padding:2rem 2.5rem;border-radius:1rem;max-width:600px;width:90%;max-height:90vh;overflow-y:auto;box-shadow:0 8px 32px rgba(0,0,0,0.15);position:relative;">
        <button onclick="closeAdminUserModal()" style="position:absolute;top:1rem;right:1rem;font-size:1.2rem;background:none;border:none;cursor:pointer;color:#64748b;"><i class="fa fa-times"></i></button>
        <h2 style="margin-bottom:1.5rem;color:#1e293b;" id="adminUserModalTitle">Yeni Admin KullanÄ±cÄ±</h2>
        
        <form id="adminUserForm">
            <!-- KullanÄ±cÄ± Tipi SeÃ§imi -->
            <div class="form-field" style="margin-bottom:1.5rem;">
                <label style="display:block;font-weight:600;margin-bottom:0.8rem;color:#334155;">KullanÄ±cÄ± Tipi</label>
                <div style="display:flex;gap:1rem;">
                    <label style="flex:1;padding:1rem;border:2px solid #e2e8f0;border-radius:0.5rem;cursor:pointer;transition:all 0.2s;" id="adminLocalUserLabel">
                        <input type="radio" name="adminUserType" value="local" checked onchange="toggleAdminUserType()" style="margin-right:0.5rem;">
                        <strong>Lokal KullanÄ±cÄ±</strong>
                        <br><small style="color:#64748b;">Åžifre ile giriÅŸ</small>
                    </label>
                    <label style="flex:1;padding:1rem;border:2px solid #e2e8f0;border-radius:0.5rem;cursor:pointer;transition:all 0.2s;" id="adminLdapUserLabel">
                        <input type="radio" name="adminUserType" value="ldap" onchange="toggleAdminUserType()" style="margin-right:0.5rem;">
                        <strong>LDAP KullanÄ±cÄ±</strong>
                        <br><small style="color:#64748b;">AD kimlik doÄŸrulama</small>
                    </label>
                </div>
            </div>

            <!-- KullanÄ±cÄ± AdÄ± -->
            <div class="form-field" style="margin-bottom:1rem;position:relative;">
                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">KullanÄ±cÄ± AdÄ± *</label>
                <input type="text" id="adminUsername" required style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;background:#fff;color:#1e293b;">
                <div id="adminUserAutocomplete" style="display:none;position:absolute;top:100%;left:0;right:0;background:#fff;border:1px solid #cbd5e1;border-top:none;border-radius:0 0 0.5rem 0.5rem;max-height:200px;overflow-y:auto;z-index:1000;margin-top:-0.25rem;"></div>
            </div>

            <!-- Åžifre (Sadece Lokal) -->
            <div class="form-field" id="adminPasswordField" style="margin-bottom:1rem;">
                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">Åžifre *</label>
                <input type="password" id="adminPassword" required style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;background:#fff;color:#1e293b;">
            </div>

            <div style="padding:1rem;background:#f1f5f9;border-radius:0.5rem;margin-bottom:1rem;">
                <p style="margin:0;color:#64748b;font-size:0.9rem;"><i class="fa fa-info-circle" style="color:#3b82f6;"></i> Admin kullanÄ±cÄ±lar tÃ¼m sisteme eriÅŸebilir</p>
            </div>

            <div style="display:flex;gap:1rem;">
                <button type="submit" class="btn primary" style="flex:1;"><i class="fa fa-save"></i> Kaydet</button>
                <button type="button" onclick="closeAdminUserModal()" class="btn ghost" style="flex:0.5;">Ä°ptal</button>
            </div>
        </form>

        <div id="adminUserModalMessage" style="margin-top:1rem;padding:0.75rem;border-radius:0.5rem;display:none;"></div>
    </div>
</div>

<!-- Åžifre DeÄŸiÅŸimi ModalÄ± -->
<div id="changePasswordModal" style="display:none;position:fixed;z-index:99999;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.4);align-items:center;justify-content:center;">
    <div style="background:#fff;padding:2rem 2.5rem;border-radius:1rem;max-width:500px;width:90%;box-shadow:0 8px 32px rgba(0,0,0,0.15);position:relative;">
        <button onclick="closeChangePasswordModal()" style="position:absolute;top:1rem;right:1rem;font-size:1.2rem;background:none;border:none;cursor:pointer;color:#64748b;"><i class="fa fa-times"></i></button>
        <h2 style="margin-bottom:1.5rem;color:#1e293b;"><i class="fa fa-key"></i> Åžifre DeÄŸiÅŸtir</h2>
        
        <form id="adminChangePasswordForm">
            <div class="form-field" style="margin-bottom:1rem;">
                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">KullanÄ±cÄ±</label>
                <input type="text" id="changePasswordUsername" readonly style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;background:#f1f5f9;color:#64748b;">
            </div>

            <div class="form-field" style="margin-bottom:1rem;">
                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">Yeni Åžifre *</label>
                <input type="password" id="adminNewPassword" required style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;background:#fff;color:#1e293b;">
            </div>

            <div class="form-field" style="margin-bottom:1.5rem;">
                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">Åžifre Tekrar *</label>
                <input type="password" id="adminConfirmPassword" required style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;background:#fff;color:#1e293b;">
            </div>

            <div style="padding:1rem;background:#fef2f2;border-left:3px solid #ef4444;border-radius:0.5rem;margin-bottom:1rem;">
                <p style="margin:0;color:#7f1d1d;font-size:0.9rem;"><i class="fa fa-warning"></i> Åžifre en az 6 karakter olmalÄ±dÄ±r</p>
            </div>

            <div style="display:flex;gap:1rem;">
                <button type="submit" class="btn primary" style="flex:1;"><i class="fa fa-save"></i> DeÄŸiÅŸtir</button>
                <button type="button" onclick="closeChangePasswordModal()" class="btn ghost" style="flex:0.5;">Ä°ptal</button>
            </div>
        </form>

        <div id="adminChangePasswordMessage" style="margin-top:1rem;padding:0.75rem;border-radius:0.5rem;display:none;"></div>
    </div>
</div>

<!-- Not GÃ¶rÃ¼ntÃ¼leme ModalÄ± -->
<div id="noteModal" style="display:none;position:fixed;z-index:99999;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.4);align-items:center;justify-content:center;">
    <div style="background:#fff;padding:2rem 2.5rem;border-radius:1rem;max-width:600px;width:90%;max-height:90vh;overflow-y:auto;box-shadow:0 8px 32px rgba(0,0,0,0.15);position:relative;">
        <button onclick="closeNoteModal()" style="position:absolute;top:1rem;right:1rem;font-size:1.2rem;background:none;border:none;cursor:pointer;color:#64748b;"><i class="fa fa-times"></i></button>
        <h2 style="margin-bottom:0.4rem;color:#1e293b;"><i class="fa fa-note-sticky"></i> Not</h2>
        <div id="noteModalTitle" style="margin-bottom:1rem;color:#64748b;font-size:0.9rem;"></div>
        <div id="noteModalBody" style="white-space:normal;color:#0f172a;line-height:1.5;"></div>
        <div style="margin-top:1.5rem;display:flex;gap:1rem;">
            <button type="button" onclick="closeNoteModal()" class="btn ghost" style="flex:0.5;">Kapat</button>
        </div>
    </div>
</div>

<!-- GiriÅŸ Yetkilisi KullanÄ±cÄ± Ekleme/DÃ¼zenleme ModalÄ± -->
<div id="userModal" style="display:none;position:fixed;z-index:99999;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.4);align-items:center;justify-content:center;">
    <div style="background:#fff;padding:2rem 2.5rem;border-radius:1rem;max-width:700px;width:90%;max-height:90vh;overflow-y:auto;box-shadow:0 8px 32px rgba(0,0,0,0.15);position:relative;">
        <button onclick="closeUserModal()" style="position:absolute;top:1rem;right:1rem;font-size:1.2rem;background:none;border:none;cursor:pointer;color:#64748b;"><i class="fa fa-times"></i></button>
        <h2 style="margin-bottom:1.5rem;color:#1e293b;" id="userModalTitle">Yeni GiriÅŸ Yetkilisi</h2>
        
        <form id="userForm">
            <!-- KullanÄ±cÄ± Tipi SeÃ§imi -->
            <div class="form-field" style="margin-bottom:1.5rem;">
                <label style="display:block;font-weight:600;margin-bottom:0.8rem;color:#334155;">KullanÄ±cÄ± Tipi</label>
                <div style="display:flex;gap:1rem;">
                    <label style="flex:1;padding:1rem;border:2px solid #e2e8f0;border-radius:0.5rem;cursor:pointer;transition:all 0.2s;" id="localUserLabel">
                        <input type="radio" name="userType" value="local" checked onchange="toggleUserType()" style="margin-right:0.5rem;">
                        <strong>Lokal KullanÄ±cÄ±</strong>
                        <br><small style="color:#64748b;">Åžifre ile giriÅŸ</small>
                    </label>
                    <label style="flex:1;padding:1rem;border:2px solid #e2e8f0;border-radius:0.5rem;cursor:pointer;transition:all 0.2s;" id="ldapUserLabel">
                        <input type="radio" name="userType" value="ldap" onchange="toggleUserType()" style="margin-right:0.5rem;">
                        <strong>LDAP KullanÄ±cÄ±</strong>
                        <br><small style="color:#64748b;">AD kimlik doÄŸrulama</small>
                    </label>
                </div>
            </div>

            <!-- KullanÄ±cÄ± AdÄ± -->
            <div class="form-field" style="margin-bottom:1rem;position:relative;">
                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">KullanÄ±cÄ± AdÄ± *</label>
                <input type="text" id="userUsername" required style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;background:#fff;color:#1e293b;">
                <div id="userAutocomplete" style="display:none;position:absolute;top:100%;left:0;right:0;background:#fff;border:1px solid #cbd5e1;border-top:none;border-radius:0 0 0.5rem 0.5rem;max-height:200px;overflow-y:auto;z-index:1000;margin-top:-0.25rem;"></div>
            </div>

            <!-- Åžifre (Sadece Lokal) -->
            <div class="form-field" id="passwordField" style="margin-bottom:1rem;">
                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">Åžifre *</label>
                <input type="password" id="userPassword" required style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;background:#fff;color:#1e293b;">
                <small style="color:#64748b;font-size:0.85rem;">BoÅŸ bÄ±rakÄ±lÄ±rsa mevcut ÅŸifre korunur (dÃ¼zenleme iÃ§in)</small>
            </div>

            <!-- Åžeflik SeÃ§imi -->
            <div class="form-field" style="margin-bottom:1rem;">
                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">Åžeflik *</label>
                <select id="userSeflik" required style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;background:#fff;color:#1e293b;">
                    <option value="">SeÃ§iniz...</option>
                </select>
            </div>

            <!-- Ä°zin Tipi -->
            <div class="form-field" style="margin-bottom:1rem;">
                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">Ä°zin Tipi</label>
                <div style="display:flex;gap:1rem;margin-bottom:0.5rem;">
                    <label style="flex:1;padding:0.8rem;border:2px solid #e2e8f0;border-radius:0.5rem;cursor:pointer;" id="sheflikPermLabel">
                        <input type="radio" name="permType" value="Sheflik" checked onchange="togglePermType()" style="margin-right:0.5rem;">
                        <strong>Åžeflik BazlÄ±</strong>
                        <br><small style="color:#64748b;">ÅžefliÄŸin tÃ¼m sunucularÄ±</small>
                    </label>
                    <label style="flex:1;padding:0.8rem;border:2px solid #e2e8f0;border-radius:0.5rem;cursor:pointer;" id="specificPermLabel">
                        <input type="radio" name="permType" value="Specific" onchange="togglePermType()" style="margin-right:0.5rem;">
                        <strong>Spesifik Sunucular</strong>
                        <br><small style="color:#64748b;">SeÃ§ili sunucular</small>
                    </label>
                </div>
            </div>

            <!-- Sunucu SeÃ§imi (Specific iÃ§in) -->
            <div id="specificServersField" style="display:none;margin-bottom:1rem;">
                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">Ä°zin Verilen Sunucular</label>
                <div style="border:1px solid #cbd5e1;border-radius:0.5rem;padding:1rem;max-height:200px;overflow-y:auto;background:#f8fafc;">
                    <div id="topologyCheckboxes">
                        <p style="color:#94a3b8;text-align:center;">YÃ¼kleniyor...</p>
                    </div>
                </div>
                <small style="color:#64748b;font-size:0.85rem;">KullanÄ±cÄ±nÄ±n gÃ¶rebileceÄŸi sunucularÄ± seÃ§in</small>
            </div>

            <div style="display:flex;gap:1rem;margin-top:1.5rem;">
                <button type="submit" class="btn primary" style="flex:1;"><i class="fa fa-save"></i> Kaydet</button>
                <button type="button" onclick="closeUserModal()" class="btn ghost" style="flex:0.5;">Ä°ptal</button>
            </div>
        </form>

        <div id="userModalMessage" style="margin-top:1rem;padding:0.75rem;border-radius:0.5rem;display:none;"></div>
    </div>
</div>

<div class="fab-stack">
    <button class="fab danger" id="fabLogout"><i class="fa fa-right-from-bracket"></i></button>
</div>

<!-- Topoloji Listesi Metin Ekleme ModalÄ± -->
<div id="addTextToTopologyModal" style="display:none;position:fixed;z-index:99999;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.4);align-items:center;justify-content:center;">
    <div style="background:#ffffff;padding:2rem 2.5rem;border-radius:1rem;max-width:600px;width:90%;max-height:90vh;overflow-y:auto;box-shadow:0 8px 32px rgba(0,0,0,0.15);position:relative;">
        <button onclick="closeTextToTopologyModal()" style="position:absolute;top:1rem;right:1rem;font-size:1.2rem;background:none;border:none;cursor:pointer;color:#64748b;"><i class="fa fa-times"></i></button>
        <h2 style="margin-bottom:1.5rem;color:#1e293b;display:flex;align-items:center;gap:0.5rem;">
            <i class="fa fa-plus-circle" style="color:var(--accent);"></i>
            Metin Ekle
        </h2>
        
        <form id="addTextToTopologyForm">
            <div class="form-field" style="margin-bottom:1rem;">
                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">Metin Ä°Ã§eriÄŸi</label>
                <textarea id="topologyTextContent" required placeholder="Eklemek istediÄŸiniz metni yazÄ±n..." rows="5" style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;resize:vertical;font-family:inherit;"></textarea>
            </div>
            
            <div style="display:flex;gap:1rem;">
                <button type="submit" class="btn primary" style="flex:1;"><i class="fa fa-save"></i> Kaydet</button>
                <button type="button" onclick="closeTextToTopologyModal()" class="btn ghost" style="flex:0.5;">Ä°ptal</button>
            </div>
        </form>
        
        <div id="addTextToTopologyMessage" style="margin-top:1rem;padding:0.75rem;border-radius:0.5rem;display:none;"></div>
    </div>
</div>

<!-- Diyagram Metin Ekleme ModalÄ± -->
<div id="addTextToDiagramModal" style="display:none;position:fixed;z-index:99999;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.4);align-items:center;justify-content:center;">
    <div style="background:#ffffff;padding:2rem 2.5rem;border-radius:1rem;max-width:600px;width:90%;max-height:90vh;overflow-y:auto;box-shadow:0 8px 32px rgba(0,0,0,0.15);position:relative;">
        <button onclick="closeTextToDiagramModal()" style="position:absolute;top:1rem;right:1rem;font-size:1.2rem;background:none;border:none;cursor:pointer;color:#64748b;"><i class="fa fa-times"></i></button>
        <h2 style="margin-bottom:1.5rem;color:#1e293b;display:flex;align-items:center;gap:0.5rem;">
            <i class="fa fa-plus-circle" style="color:var(--accent);"></i>
            Diyagram Notu Ekle
        </h2>
        
        <form id="addTextToDiagramForm">
            <div class="form-field" style="margin-bottom:1rem;">
                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">BaÅŸlÄ±k</label>
                <input type="text" id="diagramTextTitle" required placeholder="Ã–rn: Ã–nemli Bilgi" style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;">
            </div>
            
            <div class="form-field" style="margin-bottom:1rem;">
                <label style="display:block;font-weight:600;margin-bottom:0.4rem;color:#334155;">Ä°Ã§erik</label>
                <textarea id="diagramTextContent" required placeholder="Diyagram iÃ§in not veya aÃ§Ä±klama ekleyin..." rows="5" style="width:100%;padding:0.6rem;border:1px solid #cbd5e1;border-radius:0.5rem;resize:vertical;font-family:inherit;"></textarea>
            </div>
            
            <div style="display:flex;gap:1rem;">
                <button type="submit" class="btn primary" style="flex:1;"><i class="fa fa-save"></i> Kaydet</button>
                <button type="button" onclick="closeTextToDiagramModal()" class="btn ghost" style="flex:0.5;">Ä°ptal</button>
            </div>
        </form>
        
        <div id="addTextToDiagramMessage" style="margin-top:1rem;padding:0.75rem;border-radius:0.5rem;display:none;"></div>
    </div>
</div>

<script src="js/app.js?v=20260131-7"></script>
<script src="js/access-list-views.js?v=20260202"></script>
</body>
</html>
